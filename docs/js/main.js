const g=document.querySelector(".masterContainer"),l=document.querySelector(".searchList"),c=document.querySelector(".favsList");let p=document.querySelector(".searchInput");const _=document.querySelector(".resetBtn"),y=document.querySelector(".searchBtn");let r=JSON.parse(localStorage.getItem("favourites")),o,h,L,e=[];r!==null&&(e=r,f());function $(n){n.preventDefault(),L=p.value.toLowerCase();const t=`https://api.jikan.moe/v4/anime?q=${L}"`;fetch(t).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{o=s.data,l.innerHTML="",u(o,l,"Resultado de búsqueda","selected","hidden"),r!==null&&(e=r,g.classList.add("reverse")),f()})}y.addEventListener("click",$);function u(n,t,s,m,d){let a=`<h2>${s}</h2>`;n.forEach(i=>{h=i.images.jpg.image_url,r&&r.some(v=>v.mal_id===i.mal_id)||e&&e.some(v=>v.mal_id===i.mal_id)?a+=`<div class = "completeAnime ${m}" id = "${i.mal_id}" > `:a+=`<div class = "completeAnime" id = "${i.mal_id}"> `,h==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?a+=`
            <img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" id = "${i.mal_id}" alt="${i.title}">  `:a+=`
           <img src="${h}" alt="${i.title}" id = "${i.mal_id}">`,a+=`

        <h3 id = "${i.mal_id}">${i.title}</h3>
        <div id = "${i.mal_id}"  class = "delButn ${d}" >X</div>`,a+="</div>"}),t.innerHTML+=a}function q(n){const t=n.target.id;if(!n.target.id)return;console.log(t);const s=o.findIndex(d=>d.mal_id==t);e.some(d=>d.mal_id==t)?S(n):e.push(o[s]),l.innerHTML=" ",u(o,l,"Resultado de búsqueda","selected","hidden"),f()}l.addEventListener("click",q);function f(){e.length<=0?(c.classList.add("hidden"),g.classList.remove("reverse")):(g.classList.add("reverse"),c.classList.remove("hidden"),c.innerHTML=" ",u(e,c,"Animes favoritos","favsItems")),localStorage.setItem("favourites",JSON.stringify(e)),document.querySelectorAll(".delButn").forEach(t=>{console.log(t),t.addEventListener("click",S)})}function S(n){const t=n.target.id;if(!n.target.id)return;const s=e.findIndex(m=>m.mal_id==t);s===-1?console.log("El anime favorito no se encontró en favArray"):(e.splice(s,1),f()),l.innerHTML=" ",u(o,l,"Resultado de búsqueda","selected","hidden")}_.addEventListener("click",()=>{c.innerHTML="",l.innerHTML="",e.length=0,localStorage.setItem("favourites",JSON.stringify(e)),p.value=""});
//# sourceMappingURL=main.js.map
